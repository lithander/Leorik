using System.Runtime.CompilerServices;

namespace Leorik.Core
{
    public struct Material
    {
        public short Base;
        public short Endgame;

        [MethodImpl(MethodImplOptions.AggressiveInlining)]
        public void AddScore(int pieceIndex, int squareIndex)
        {
            int tableIndex = (pieceIndex << 6) | squareIndex;
            Base += MidgameTables[tableIndex];
            Endgame += EndgameTables[tableIndex];
        }

        [MethodImpl(MethodImplOptions.AggressiveInlining)]
        public void SubtractScore(int pieceIndex, int squareIndex)
        {
            int tableIndex = (pieceIndex << 6) | squareIndex;
            Base -= MidgameTables[tableIndex];
            Endgame -= EndgameTables[tableIndex];
        }

        public static readonly short[] MidgameTables = new short[6 * 64]{
          100,  100,  100,  100,  100,  100,  100,  100,
          126,  153,  104,  136,  117,  167,  108,   61,
           75,   77,  108,  107,  144,  148,  107,   76,
           61,   84,   81,  101,  102,   95,   96,   67,
           53,   61,   77,   89,   95,   89,   85,   60,
           54,   56,   69,   67,   78,   86,   98,   72,
           51,   66,   63,   66,   69,  104,  106,   68,
          100,  100,  100,  100,  100,  100,  100,  100,

          161,  242,  252,  266,  301,  239,  268,  207,
          242,  264,  383,  331,  324,  370,  302,  289,
          275,  366,  359,  383,  408,  419,  391,  342,
          308,  348,  341,  384,  364,  398,  351,  345,
          317,  331,  350,  343,  361,  355,  350,  322,
          315,  329,  352,  350,  361,  365,  363,  322,
          300,  271,  325,  338,  341,  346,  305,  319,
          238,  316,  282,  298,  323,  307,  319,  275,

          268,  275,  227,  227,  267,  251,  278,  277,
          276,  316,  289,  270,  319,  333,  318,  267,
          292,  327,  342,  341,  335,  347,  336,  311,
          308,  324,  328,  364,  347,  341,  326,  317,
          315,  333,  328,  339,  352,  326,  325,  324,
          325,  342,  339,  333,  335,  358,  345,  334,
          319,  343,  336,  325,  334,  338,  357,  315,
          286,  324,  325,  315,  322,  315,  279,  300,

          446,  470,  433,  477,  478,  460,  457,  456,
          450,  451,  480,  489,  501,  515,  464,  481,
          414,  435,  447,  450,  437,  474,  492,  448,
          400,  411,  426,  448,  439,  458,  433,  420,
          388,  399,  417,  415,  430,  428,  451,  407,
          389,  410,  420,  418,  437,  442,  441,  408,
          390,  418,  416,  429,  441,  444,  433,  376,
          418,  426,  442,  449,  453,  437,  414,  423,

          854,  870,  892,  876,  927,  917,  907,  918,
          871,  844,  877,  891,  884,  935,  908,  934,
          875,  873,  893,  884,  916,  942,  931,  944,
          856,  862,  868,  867,  883,  899,  888,  893,
          888,  858,  883,  871,  885,  888,  891,  893,
          883,  907,  886,  893,  892,  904,  915,  903,
          872,  889,  910,  904,  912,  913,  894,  900,
          899,  898,  909,  916,  896,  881,  882,  855,

          -48,   -1,   -5,   -8,  -19,   -9,    6,   -9,
            0,   30,   23,   38,   16,   17,    8,  -14,
            9,   33,   42,   13,   24,   43,   53,  -10,
           -6,   13,   17,    2,   -9,   -9,    0,  -51,
          -29,   20,   -9,  -64,  -68,  -39,  -42,  -71,
          -10,   21,   -7,  -35,  -49,  -34,    3,  -17,
           17,   40,    2,  -46,  -26,   -2,   40,   41,
           -2,   68,   40,  -43,   22,  -12,   58,   44,
        };

        public static short[] EndgameTables = new short[6 * 64]{
            0,    0,    0,    0,    0,    0,    0,    0,
          -10,  -39,   15,  -32,   -7,  -83,   -5,   50,
           58,   64,   20,   10,  -43,  -51,    9,   39,
           22,   -7,   -3,  -32,  -31,  -26,  -26,    2,
           14,    7,  -10,  -22,  -28,  -28,  -29,   -4,
            6,    7,   -3,    9,   -5,  -22,  -53,  -23,
           21,   -1,   19,   18,   18,  -37,  -58,  -18,
            0,    0,    0,    0,    0,    0,    0,    0,

           63,   -8,   15,  -18,  -39,    7,  -39,  -18,
           12,    8, -133,  -51,  -52, -119,  -46,  -56,
          -27, -108,  -73, -100, -142, -152, -136, -102,
          -46,  -75,  -45,  -93,  -71, -118,  -74,  -89,
          -59,  -62,  -62,  -46,  -73,  -68,  -73,  -63,
          -65,  -60,  -83,  -67,  -83,  -96, -112,  -73,
          -61,  -11,  -62,  -75,  -75,  -90,  -51,  -93,
            0,  -95,  -26,  -38,  -72,  -56,  -99,  -51,

           -8,  -19,   32,   38,   -2,   13,  -18,  -26,
           -9,  -57,  -20,  -13,  -58,  -74,  -55,   -5,
          -27,  -70,  -85,  -84,  -76,  -87,  -78,  -46,
          -50,  -61,  -62,  -99,  -79,  -77,  -71,  -58,
          -62,  -75,  -58,  -64,  -91,  -61,  -74,  -65,
          -71,  -83,  -75,  -68,  -68, -105,  -90,  -84,
          -65,  -98,  -84,  -68,  -78,  -91, -117,  -76,
          -36,  -68,  -76,  -59,  -68,  -65,  -20,  -49,

           31,   -1,   48,   -7,   -7,   11,   11,   14,
           23,   23,  -12,  -23,  -48,  -59,    6,  -16,
           61,   38,   22,   20,   31,  -17,  -37,   14,
           77,   62,   52,   16,   28,    8,   27,   53,
           90,   78,   57,   54,   34,   33,    4,   58,
           82,   59,   42,   47,   19,   12,   14,   52,
           79,   45,   50,   37,   13,    7,   19,   94,
           43,   40,   20,   11,    2,   20,   50,   20,

           18,   30,    5,   35,  -30,  -17,  -32,  -30,
            4,   63,   34,   30,   47,  -31,   -2,  -34,
           -5,   12,  -15,   41,   11,  -38,  -27,  -50,
           43,   38,   31,   57,   54,   22,   61,   43,
          -24,   55,   11,   56,   22,   25,   29,   31,
           -6,  -68,    6,  -16,   -5,  -10,  -24,   -5,
           -6,  -31,  -66,  -48,  -58,  -61,  -56,  -56,
          -51,  -64,  -66,  -81,  -26,  -36,  -16,   -5,

          -41,  -35,  -33,  -19,    0,    8,   -5,  -12,
          -21,  -17,   -5,  -20,    3,   19,   22,   14,
          -13,  -18,  -23,    3,   -6,   -3,  -12,    8,
          -17,    4,    9,   26,   37,   43,   28,   46,
           -1,  -22,   36,  102,  108,   73,   61,   60,
          -17,  -21,   25,   66,   86,   65,   10,    0,
          -57,  -48,   14,   73,   52,   18,  -44,  -77,
          -72, -127,  -76,   32,  -56,   -6, -104, -122,
        };
    }
}
